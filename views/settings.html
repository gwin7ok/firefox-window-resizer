<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Window Resizer 設定</title>
  <link rel="stylesheet" href="../styles/settings.css">
</head>
<body>
  <div class="settings-container">
    <h1>Window Resizer 設定</h1>
    
    <div class="section">
      <h2>プリセット管理</h2>
      
      <div class="presets-table-container">
        <table id="presets-table">
          <thead>
            <tr>
              <th>名前</th>
              <th>幅 (px)</th>
              <th>高さ (px)</th>
              <th>左 (px)</th>
              <th>上 (px)</th>
              <th>デフォルト</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="presets-body">
            <!-- プリセットはJSで動的に追加 -->
          </tbody>
        </table>
      </div>
      
      <div class="presets-actions">
        <button id="add-preset">新規プリセット追加</button>
      </div>
    </div>
    
    <!-- プリセット編集モーダル -->
    <div id="preset-modal" class="modal">
      <div class="modal-content">
        <h3 id="modal-title">プリセット編集</h3>
        
        <div class="form-group">
          <label for="preset-name">名前:</label>
          <input type="text" id="preset-name" placeholder="プリセット名">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="preset-width">幅 (px):</label>
            <div class="input-with-button">
              <input type="number" id="preset-width" placeholder="幅">
            </div>
          </div>
          
          <div class="form-group">
            <label for="preset-height">高さ (px):</label>
            <div class="input-with-button">
              <input type="number" id="preset-height" placeholder="高さ">
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="preset-left">左 (px):</label>
            <div class="input-with-button">
              <input type="number" id="preset-left" placeholder="左位置">
            </div>
          </div>
          
          <div class="form-group">
            <label for="preset-top">上 (px):</label>
            <div class="input-with-button">
              <input type="number" id="preset-top" placeholder="上位置">
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="target-monitor">対象モニタ:</label>
          <select id="target-monitor">
            <option value="main">メインモニタ</option>
            <option value="secondary">セカンダリモニタ</option>
          </select>
        </div>
        
        <div class="form-group" id="current-monitor-container">
          <label for="current-monitor">現在のモニタ:</label>
          <select id="current-monitor">
            <option value="main">メインモニタ</option>
            <option value="secondary">セカンダリモニタ</option>
          </select>
        </div>
        
        <div id="scaling-correction-container" style="display:none;">
          <div class="form-group">
            <label>
              <input type="checkbox" id="apply-scaling-correction"> 
              モニタの拡大率の違いを補正する
            </label>
          </div>
        </div>
        
        <div class="form-group">
          <label>モニタ拡大率設定:</label>
          <div class="form-row">
            <div class="form-group">
              <label for="main-scaling">メインモニタ (%)</label>
              <input type="number" id="main-scaling" value="125" min="100" max="500">
            </div>
            <div class="form-group">
              <label for="secondary-scaling">セカンダリモニタ (%)</label>
              <input type="number" id="secondary-scaling" value="100" min="100" max="500">
            </div>
          </div>
          <p class="form-helper">※DPR検出値が1.0の場合、この値が優先されます</p>
        </div>
        
        <div id="dpr-container" style="display:none;" class="form-group">
          <div class="info-box">
            <!-- ここにJavaScriptで動的に内容が入ります -->
          </div>
          
          <div class="debug-actions">
            <button id="copy-dpr-info" class="secondary small">詳細情報をコピー</button>
            <button id="view-console" class="secondary small">コンソールを表示</button>
          </div>
        </div>

        <button id="use-current-size">現在のサイズとポジションを使用</button>
        
        <div class="modal-actions">
          <button id="modal-cancel">キャンセル</button>
          <button id="modal-save">保存</button>
        </div>
      </div>
    </div>
    
    <!-- 設定画面の下部に追加 -->
    <div class="section">
      <h2>高度な設定</h2>
      <div class="form-group">
        <label>モニタスケーリングの検出方法:</label>
        <select id="dpr-detection-method">
          <option value="auto">自動検出 (devicePixelRatio)</option>
          <option value="manual">手動設定を常に使用</option>
          <option value="enhanced">拡張検出 (複数の方法で検証)</option>
        </select>
      </div>
      
      <div class="info-box info">
        <p><strong>ヒント:</strong> DPRが正しく検出されない場合、「手動設定を常に使用」を選択し、OSの拡大率を手動で入力してください。</p>
        <p>Windows設定画面で確認できるディスプレイの拡大率（125%など）が正確な値です。</p>
      </div>
      
      <div class="debug-info">
        <p>バージョン: 1.0.0</p>
        <p>ブラウザ: <span id="browser-info">Firefox</span></p>
        <p>OS: <span id="os-info">Windows</span></p>
      </div>
    </div>
  </div>
  
  <script src="settings.js"></script>
</body>
</html>